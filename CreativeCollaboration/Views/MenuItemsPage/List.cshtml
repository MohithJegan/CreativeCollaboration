@model IEnumerable<MenuItemDto>

@if (@ViewData["User"] == "Admin")
{
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-light">Menu Items</h2>
            <a asp-action="Add" class="btn btn-primary shadow-sm px-4 py-2"
               style="background: rgba(0, 255, 0, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                Add Menu Item
            </a>
        </div>

        <!-- Search -->
        <div class="search-container position-relative mb-4">
            <input type="text" id="menuSearchBar" class="form-control search-input"
                   placeholder="Search menu items..."
                   style="background: rgba(255, 255, 255, 0.1);
                          border: 1px solid rgba(255, 255, 255, 0.2);
                          color: white;
                          border-radius: 50px;
                          padding: 12px 20px 12px 45px;
                          backdrop-filter: blur(10px);
                          transition: all 0.3s ease;">
            <i class="fas fa-search search-icon"
               style="position: absolute;
                      left: 20px;
                      top: 50%;
                      transform: translateY(-50%);
                      color: rgba(255, 255, 255, 0.6);"></i>
        </div>

        <!-- Table -->
        <div class="table-responsive">
            <table class="table table-borderless shadow-lg rounded-3 overflow-hidden"
                   style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <thead>
                    <tr>
                        <th class="p-3 text-center text-light">Thumbnail</th>
                        <th class="p-3 text-center text-light">Item Name</th>
                        <th class="p-3 text-center text-light">Description</th>
                        <th class="p-3 text-center text-light">Price</th>
                        <th class="p-3 text-center text-light">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="align-middle menu-item-row"
                            style="background: rgba(255, 255, 255, 0.1); border-bottom: 1px solid rgba(255, 255, 255, 0.2);">
                            <td class="p-3 text-center">
                                <img src="@(!string.IsNullOrEmpty(item.ImagePath) ? item.ImagePath : "/images/default-menu-item.jpg")"
                                     class="img-thumbnail"
                                     style="height: 75px; width: 75px; object-fit: cover;"
                                     alt="Menu Thumbnail" />
                            </td>
                            <td class="p-3 text-center fw-semibold text-light item-name">@item.MName</td>
                            <td class="p-3 text-center fw-semibold text-light">@item.Description</td>
                            <td class="p-3 text-center fw-semibold text-light">@item.Price.ToString("C")</td>
                            <td class="p-3 text-center">
                                <a asp-action="Edit" asp-route-id="@item.MenuItemId"
                                   class="btn btn-outline-warning btn-sm me-2"
                                   style="background: rgba(255, 255, 0, 0.2);border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                                    Edit
                                </a>
                                <a asp-action="Details" asp-route-id="@item.MenuItemId"
                                   class="btn btn-outline-info btn-sm me-2"
                                   style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                                    Details
                                </a>
                                <a asp-action="ConfirmDelete" asp-route-id="@item.MenuItemId"
                                   class="btn btn-outline-danger btn-sm"
                                   style=" background: rgba(255, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); color: white;">
                                    Delete
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}

@if (@ViewData["User"] == "Customer")
{
    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="fw-bold text-light">Menu Items</h2>
        </div>

        <!-- Search -->
        <div class="search-container position-relative mb-4">
            <input type="text" id="menuSearchBar" class="form-control search-input"
                   placeholder="Search menu items..."
                   style="background: rgba(255, 255, 255, 0.1);
                          border: 1px solid rgba(255, 255, 255, 0.2);
                          color: white;
                          border-radius: 50px;
                          padding: 12px 20px 12px 45px;
                          backdrop-filter: blur(10px);
                          transition: all 0.3s ease;">
            <i class="fas fa-search search-icon"
               style="position: absolute;
                      left: 20px;
                      top: 50%;
                      transform: translateY(-50%);
                      color: rgba(255, 255, 255, 0.6);"></i>
        </div>

        <!-- Table -->
        <div class="table-responsive">
            <table class="table table-borderless shadow-lg rounded-3 overflow-hidden"
                   style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <thead>
                    <tr>
                        <th class="p-3 text-center text-light">Thumbnail</th>
                        <th class="p-3 text-center text-light">Item Name</th>
                        <th class="p-3 text-center text-light">Description</th>
                        <th class="p-3 text-center text-light">Price</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="align-middle menu-item-row"
                            style="background: rgba(255, 255, 255, 0.1); border-bottom: 1px solid rgba(255, 255, 255, 0.2);">
                            <td class="p-3 text-center">
                                <img src="@(!string.IsNullOrEmpty(item.ImagePath) ? item.ImagePath : "/images/default-menu-item.jpg")"
                                     class="img-thumbnail"
                                     style="height: 75px; width: 75px; object-fit: cover;"
                                     alt="Menu Thumbnail" />
                            </td>
                            <td class="p-3 text-center fw-semibold text-light item-name">@item.MName</td>
                            <td class="p-3 text-center fw-semibold text-light">@item.Description</td>
                            <td class="p-3 text-center fw-semibold text-light">@item.Price.ToString("C")</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
}

<style>
    .search-input:hover {
        border-color: rgba(255, 255, 255, 0.4) !important;
    }

    .search-input:focus {
        background: rgba(255, 255, 255, 0.15) !important;
        border-color: rgba(255, 255, 255, 0.4) !important;
        box-shadow: 0 0 0 0.25rem rgba(255, 255, 255, 0.1);
        outline: none;
        color: white;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const searchBar = document.getElementById('menuSearchBar');
        searchBar.addEventListener('input', function () {
            const searchValue = searchBar.value.toLowerCase();
            const rows = document.querySelectorAll('.menu-item-row');

            rows.forEach(row => {
                const itemName = row.querySelector('.item-name').textContent.toLowerCase();
                if (itemName.includes(searchValue)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        });
    });
</script>

